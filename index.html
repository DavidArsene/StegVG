<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>Stegable Vector Graphics</title>
	<link href="style.css" rel="stylesheet">
	<link href="https://unpkg.com/@highlightjs/cdn-assets@latest/styles/github-dark.min.css"
	      rel="stylesheet">
</head>
<body>

<canvas id="matrix"></canvas>
<div id="hero">
	<h1 style="grid-area: hero;">Stegable Vector Graphics</h1>

	<p style="grid-area: desc;">Hide your data inside SVG files &nbsp;•<br>
		More space compared to classic JPG or PNG files &nbsp;•<br>
		Unknown method, less likely to be caught &nbsp;•</p>

	<a href="https://github.com/DavidArsene/StegVG"
	   style="grid-area: logo;">

		<img alt="GitHub" height="75" src="preload/Invertocat.svg" width="75">
		<p>Star on GitHub</p>
	</a>
</div>

<div id="app">
	<div class="section">
		<h2>Hide or reveal a message</h2>
		<div>
			<button class="btn btn-outline" id="choose">
				<input accept="image/svg+xml" id="file" type="file">
				<img alt="Upload" src="upload.svg">
				<span>Choose an SVG file</span>
			</button>
			<button class="btn btn-outline" id="example">
				<img alt="Upload" src="upload.svg">
				<span>Or open a random demo</span>
			</button>
		</div>

		<label for="payload" ondblclick="lorem()">Text</label>
		<textarea id="payload" placeholder="The payload you want to encode. Leave empty to decode."></textarea>

		<label for="key" ondblclick="lorem()">Password</label>
		<textarea disabled id="key" placeholder="Choose a supported method to enter password."></textarea>

		<label for="method">Method</label>
		<select id="method">
			<option value="ascii">ASCII Codes (low security)</option>
			<option value="xor">XOR Cipher (medium security)</option>
			<option value="aes">AES Encryption (high security)</option>
			<option value="v1">[Deprecated] Bit by bit, padded with 000, 2 until end</option>
			<option value="v2">[Deprecated] Bit by bit, padded with 000, 2 at end</option>
		</select>

		<button class="btn btn-primary" disabled id="btn-start">
			<img alt="Key" src="key.svg">
			<span>Decode</span>
		</button>
	</div>

	<div class="section">
		<div id="output">
			<p>No image loaded</p>
		</div>

		<button class="btn btn-primary" disabled id="btn-download">
			<img alt="Download" src="download.svg">
			Download
		</button>
	</div>

	<div style="grid-column: 1 / 3;">
		<label for="code">SVG Code</label>
		<pre>
			<code class="language-xml" id="code"></code>
		</pre>
	</div>
</div>

<script>
	window.onerror = (msg, url, line) => {
		alert(`${ msg }\n\nSource: ${ url } : ${ line }`)
		return true
	}
	window.onunhandledrejection = (event) => {
		alert(`Promise ${ event.reason }`)
		return true
	}
</script>
<script src="https://unpkg.com/@highlightjs/cdn-assets@latest/highlight.min.js"></script>
<script src="https://unpkg.com/@highlightjs/cdn-assets@latest/languages/xml.min.js"></script>

<script defer src="app/main.js"></script>
<script defer src="datastar/datastar.js" type="module"></script>
<script defer src="app/matrix.js"></script>
</body>
</html>
